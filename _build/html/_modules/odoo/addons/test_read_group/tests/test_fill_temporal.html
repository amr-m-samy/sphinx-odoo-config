<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>odoo.addons.test_read_group.tests.test_fill_temporal &mdash; Amr  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Amr
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules.html">odoo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Amr</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../../odoo.html">odoo</a></li>
      <li class="breadcrumb-item active">odoo.addons.test_read_group.tests.test_fill_temporal</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for odoo.addons.test_read_group.tests.test_fill_temporal</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Test for fill temporal.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">odoo.tests</span> <span class="kn">import</span> <span class="n">common</span>

<div class="viewcode-block" id="TestFillTemporal">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal">[docs]</a>
<span class="k">class</span> <span class="nc">TestFillTemporal</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">TransactionCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test for fill temporal.</span>

<span class="sd">    This feature is mainly used in graph view. For more informations, read the</span>
<span class="sd">    documentation of models&#39;s &#39;_read_group_fill_temporal&#39; method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestFillTemporal.setUp">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.setUp">[docs]</a>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestFillTemporal</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;test_read_group.fill_temporal&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_date_range_and_flag">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_date_range_and_flag">[docs]</a>
    <span class="k">def</span> <span class="nf">test_date_range_and_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simple date range test, the flag is also tested.</span>

<span class="sd">        One of the most simple test. It must verify that dates &#39;holes&#39; are filled</span>
<span class="sd">        only when the fill_temporal flag is set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-12-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;September 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;October 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;November 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1917-01-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1917-01-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;December 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span>
        <span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">if</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;date_count&#39;</span><span class="p">]])</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_date_range_with_context_timezone">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_date_range_with_context_timezone">[docs]</a>
    <span class="k">def</span> <span class="nf">test_date_range_with_context_timezone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test if date are date_trunced correctly by pgres.</span>

<span class="sd">        This test was added in attempt to fix a bug appearing with babel that</span>
<span class="sd">        we use to translate the dates. Typically after a daylight saving, A</span>
<span class="sd">        whole year was displayed in a graph like this (APR missing and OCT</span>
<span class="sd">        appearing twice) :</span>

<span class="sd">            JAN   FEB   MAR   MAY   JUN   JUL   AUG   SEP   OCT   OCT   NOV</span>
<span class="sd">                           ^^^                                    ^^^</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-01-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-02-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-02-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;January 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-03-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-04-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-04-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;March 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-04-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-05-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-05-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;April 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-05-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-06-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-05-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-06-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;May 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-06-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-07-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-07-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;June 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-07-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-08-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-07-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-08-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;July 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-09-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-10-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-09-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-10-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;September 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-10-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-11-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-11-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;October 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-11-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-12-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-11-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;November 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-12-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;December 1915&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;January 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span>
        <span class="p">}]</span>

        <span class="c1"># Time Zone                      UTC     UTC DST</span>
        <span class="n">tzs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;America/Anchorage&quot;</span><span class="p">,</span>  <span class="c1"># −09:00    −08:00</span>
               <span class="s2">&quot;Europe/Brussels&quot;</span><span class="p">,</span>    <span class="c1"># +01:00    +02:00</span>
               <span class="s2">&quot;Pacific/Kwajalein&quot;</span><span class="p">]</span>  <span class="c1"># +12:00    +12:00</span>

        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="n">tzs</span><span class="p">:</span>
            <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">,</span> <span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_only_with_only_null_date">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_only_with_only_null_date">[docs]</a>
    <span class="k">def</span> <span class="nf">test_only_with_only_null_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;We should have the same result when fill_temporal is set or not.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)],</span>
                     <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
                     <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                     <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
                     <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_date_range_and_null_date">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_date_range_and_null_date">[docs]</a>
    <span class="k">def</span> <span class="nf">test_date_range_and_null_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test data with null and non-null dates.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;September 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;October 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">9</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">24</span>
        <span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">if</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;date_count&#39;</span><span class="p">]])</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_date_range_groupby_week">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_date_range_groupby_week">[docs]</a>
    <span class="k">def</span> <span class="nf">test_date_range_groupby_week</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test data with weeks starting on Sunday.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">([</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>   <span class="c1"># saturday W34</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">},</span>  <span class="c1"># sunday   W35</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>   <span class="c1"># sunday   W38</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>   <span class="c1"># friday   W34</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-11&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>   <span class="c1"># monday   W38</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-12&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">},</span>  <span class="c1"># tuesday  W38</span>
        <span class="p">])</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W34 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W35 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W36 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W37 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W38 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date:week&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">if</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;date_count&#39;</span><span class="p">]])</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date:week&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_order_date_desc">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_order_date_desc">[docs]</a>
    <span class="k">def</span> <span class="nf">test_order_date_desc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test if changing Model._order has influence on the result.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="p">),</span> <span class="s1">&#39;_order&#39;</span><span class="p">,</span> <span class="s1">&#39;date desc&#39;</span><span class="p">)</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;September 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;October 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">9</span>
        <span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">if</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;date_count&#39;</span><span class="p">]])</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_timestamp_without_timezone">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_timestamp_without_timezone">[docs]</a>
    <span class="k">def</span> <span class="nf">test_timestamp_without_timezone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test datetimes.</span>

<span class="sd">        Date stored with an hour inside the Odoo model are processed as timestamp</span>
<span class="sd">        without timezone by postgres.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-19 01:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-18 02:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18 01:50:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-19 23:59:59&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">19</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01 00:00:00&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01 00:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01 00:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01 00:00:00&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01 00:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01 00:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;September 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-10-01 00:00:00&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01 00:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-10-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01 00:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;October 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">26</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
            <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">24</span>
        <span class="p">}]</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">if</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;datetime_count&#39;</span><span class="p">]])</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_with_datetimes_and_groupby_per_hour">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_with_datetimes_and_groupby_per_hour">[docs]</a>
    <span class="k">def</span> <span class="nf">test_with_datetimes_and_groupby_per_hour</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test with datetimes and groupby per hour.</span>

<span class="sd">        Test if datetimes are filled correctly when grouping by hours instead of</span>
<span class="sd">        months.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 01:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 01:50:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 02:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 13:50:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 23:50:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;01:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;02:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;03:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 05:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 05:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;04:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 05:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 06:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 05:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 06:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;05:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 06:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 07:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 06:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 07:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;06:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 07:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 08:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 07:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 08:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;07:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 08:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 09:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 08:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 09:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;08:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 09:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 10:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 09:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 10:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;09:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 10:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 11:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 10:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 11:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;10:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 11:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 12:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 11:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 12:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;11:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 12:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 13:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 12:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 13:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;12:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 13:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 14:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 13:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 14:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;01:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 14:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 15:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 14:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 15:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;02:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 15:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 16:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 15:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 16:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;03:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 16:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 17:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 16:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 17:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;04:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 17:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 18:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 17:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 18:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;05:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 18:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 19:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 18:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 19:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;06:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 19:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 20:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 19:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 20:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;07:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 20:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 21:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 20:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 21:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;08:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 21:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 22:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 21:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 22:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;09:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 22:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 23:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 22:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 23:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;10:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 23:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-02 00:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 23:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-02 00:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;11:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_hour_with_timezones">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_hour_with_timezones">[docs]</a>
    <span class="k">def</span> <span class="nf">test_hour_with_timezones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test hour with timezones.</span>

<span class="sd">        What we do here is similar to test_with_datetimes_and_groupby_per_hour</span>
<span class="sd">        but with a timezone in the user context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-31 22:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 03:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-12-31 22:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-12-31 23:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-31 22:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-31 23:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;04:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1915-12-31 23:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 00:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1915-12-31 23:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 00:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;05:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 00:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;06:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 01:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;07:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 02:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;08:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 03:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-01-01 04:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:hour&#39;</span><span class="p">:</span> <span class="s1">&#39;09:00 01 Jan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Asia/Hovd&#39;</span><span class="p">,</span> <span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span>
                                       <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime:hour&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_quarter_with_timezones">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_quarter_with_timezones">[docs]</a>
    <span class="k">def</span> <span class="nf">test_quarter_with_timezones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test quarter with timezones.</span>

<span class="sd">        We group year by quarter and check that it is consistent with timezone.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-01-01 03:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-12-30 22:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-12-31 17:00:00&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-03-31 16:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;2015-12-31 17:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-03-31 16:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="s1">&#39;Q1 2016&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-03-31 16:00:00&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-06-30 16:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-03-31 16:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-06-30 16:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="s1">&#39;Q2 2016&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-06-30 16:00:00&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-09-30 17:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-06-30 16:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-09-30 17:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="s1">&#39;Q3 2016&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-09-30 17:00:00&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-12-31 17:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-09-30 17:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;2016-12-31 17:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime:quarter&#39;</span><span class="p">:</span> <span class="s1">&#39;Q4 2016&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Asia/Hovd&#39;</span><span class="p">,</span> <span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span>
                                       <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime:quarter&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_edge_fx_tz">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_edge_fx_tz">[docs]</a>
    <span class="k">def</span> <span class="nf">test_edge_fx_tz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;We test if different edge effect by using a different timezone from the user context</span>

<span class="sd">        Suppose a user resident near Hovd, a city in Mongolia. he sells a product</span>
<span class="sd">        at exacltly 4:00 AM on 1st January 2018. Using its context, that datetime</span>
<span class="sd">        is previously converted to UTC time by the ORM so as being stored properly</span>
<span class="sd">        inside the datebase. We are in winter time so &#39;Asia/Hovd&#39; is UTC+7 :</span>

<span class="sd">                 &#39;2018-01-01 04:00:00&#39;   --&gt;  &#39;2017-12-31 21:00:00&#39;</span>

<span class="sd">        If that same user groups by datetime, we must ensure that the last</span>
<span class="sd">        displayed date is in January and not in December.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-12-31 21:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-12-31 17:00:00&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-31 17:00:00&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-12-31 17:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-01-31 17:00:00&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;January 2018&#39;</span><span class="p">,</span>
            <span class="s1">&#39;datetime_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">42</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Asia/Hovd&#39;</span><span class="p">,</span> <span class="n">fill_temporal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_with_bounds">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_with_bounds">[docs]</a>
    <span class="k">def</span> <span class="nf">test_with_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key (fill_from, fill_to).</span>

<span class="sd">        We apply the fill_temporal logic only to a cibled portion of the result of a read_group.</span>
<span class="sd">        [fill_from, fill_to] are the inclusive bounds of this portion.</span>
<span class="sd">        Data outside those bounds will not be filtered out</span>
<span class="sd">        Bounds will be converted to the start of the period which they belong to (depending</span>
<span class="sd">        on the granularity of the groupby). This means that we can put any date of the period as the bound</span>
<span class="sd">        and it will still work.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;May 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;June 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;July 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;November 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill_from&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-05-15&#39;</span><span class="p">,</span> <span class="s2">&quot;fill_to&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-08-15&#39;</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_with_bounds_groupby_week">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_with_bounds_groupby_week">[docs]</a>
    <span class="k">def</span> <span class="nf">test_with_bounds_groupby_week</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test data with weeks starting on Sunday and forced boundaries.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">([</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-19&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>   <span class="c1"># saturday W34</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">},</span>  <span class="c1"># sunday   W35</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>   <span class="c1"># sunday   W38</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-18&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>   <span class="c1"># friday   W34</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-11&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>   <span class="c1"># monday   W38</span>
            <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-12&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">},</span>  <span class="c1"># tuesday  W38</span>
        <span class="p">])</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-06&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-06&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W33 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-13&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W34 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-20&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W35 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-27&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W36 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-03&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W37 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-10&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W38 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-24&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-17&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-24&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date:week&#39;</span><span class="p">:</span> <span class="s1">&#39;W39 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill_from&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-08-10&#39;</span><span class="p">,</span> <span class="s2">&quot;fill_to&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-09-20&#39;</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date:week&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_upper_bound">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_upper_bound">[docs]</a>
    <span class="k">def</span> <span class="nf">test_upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key (fill_to).</span>

<span class="sd">        Same as with both bounds, but this time the first bound is the earliest group with data</span>
<span class="sd">        (since only fill_to is set)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;March 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;April 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill_to&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-04-15&#39;</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_lower_bound">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_lower_bound">[docs]</a>
    <span class="k">def</span> <span class="nf">test_lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key (fill_from).</span>

<span class="sd">        Same as with both bounds, but this time the second bound is the lastest group with data</span>
<span class="sd">        (since only fill_from is set)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;March 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;April 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill_from&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_empty_context_key">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_empty_context_key">[docs]</a>
    <span class="k">def</span> <span class="nf">test_empty_context_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key.</span>

<span class="sd">        When fill_temporal context key is set to an empty dictionary, it must be equivalent to being True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;March 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;April 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_min_groups">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_min_groups">[docs]</a>
    <span class="k">def</span> <span class="nf">test_min_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key (min_groups).</span>

<span class="sd">        We guarantee that at least a certain amount of contiguous groups is returned, from the</span>
<span class="sd">        earliest group with data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-04-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;March 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;min_groups&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFillTemporal.test_with_bounds_and_min_groups">
<a class="viewcode-back" href="../../../../../odoo.addons.test_read_group.tests.html#odoo.addons.test_read_group.tests.test_fill_temporal.TestFillTemporal.test_with_bounds_and_min_groups">[docs]</a>
    <span class="k">def</span> <span class="nf">test_with_bounds_and_min_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the alternative dictionary format for the fill_temporal context key (fill_from, fill_to, min_groups).</span>

<span class="sd">        We guarantee that at least a certain amount of contiguous groups is returned, from the</span>
<span class="sd">        fill_from bound. The fill_from bound has precedence over the first group with data regarding min_groups</span>
<span class="sd">        (min_groups will first try to anchor itself on fill_from, or, if not specified, on the first group with data).</span>
<span class="sd">        This amount is not restricted by the fill_to bound, so, if necessary, the fill_temporal</span>
<span class="sd">        logic will be applied until min_groups is guaranteed, even for groups later than fill_to</span>
<span class="sd">        Groups outside the specifed bounds are not counted as part of min_groups, unless added specifically</span>
<span class="sd">        to guarantee min_groups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-15&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-02-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-03-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;February 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-05-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;May 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;June 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-07-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;July 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-09-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;August 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s1">&#39;__domain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">)],</span>
            <span class="s1">&#39;__range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-11-01&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;1916-12-01&#39;</span><span class="p">}},</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;November 1916&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date_count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span>
        <span class="p">}]</span>

        <span class="n">model_fill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">fill_temporal</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill_from&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-05-15&#39;</span><span class="p">,</span> <span class="s2">&quot;fill_to&quot;</span><span class="p">:</span> <span class="s1">&#39;1916-07-15&#39;</span><span class="p">,</span> <span class="s2">&quot;min_groups&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">model_fill</span><span class="o">.</span><span class="n">read_group</span><span class="p">([],</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Amr.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>